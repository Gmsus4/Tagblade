---
import { titles } from '../../js/titles';
import { proyectos } from '../../js/proyectos';
import TitleSection from '../common/TitleSection.astro';
---

<section id="proyectos" class="md:px-20 sm:px-10 px-5 lg:scroll-mt-18 scroll-mt-12 w-full bg-background-secondary dark:bg-dark-background flex items-center justify-center lg:min-h-[calc(100vh-70px)]" aria-label="Sección de Proyectos">
  <div class="max-w-screen-xl mx-auto px-0 lg:py-16 p-12 relative py-12" data-aos="fade-up" data-aos-duration="1000">
    <TitleSection title={titles.proyectos.title} />

    <!-- Grid mejorado de proyectos -->
    <div class="grid gap-6 mt-10 grid-cols-[repeat(auto-fit,minmax(300px,1fr))] md:grid-cols-[repeat(auto-fit,minmax(400px,1fr))]">
      {proyectos.map((proyecto, index) => (
        <div class="project-card rounded-xl bg-background/90 dark:bg-dark-surface shadow-lg overflow-hidden transition-all duration-300 group relative border border-gray-200/50 dark:border-gray-700/50">
          {/* Efecto de hielo sutil */}
          <div class="ice-effect absolute inset-0 opacity-0 pointer-events-none transition-opacity duration-700 z-10"></div>
          
          <div class="relative overflow-hidden h-48">
            <img 
              src={proyecto.urlImage} 
              alt={`Imagen de ${proyecto.title}`} 
              class="w-full h-full object-cover transition duration-500 group-hover:scale-105" 
            />
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            
            <span class="absolute top-3 right-3 bg-primary/90 text-white text-xs px-3 py-1 rounded-full shadow-sm z-20">
              {proyecto.type}
            </span>
          </div>
          
          {/* Contenido del proyecto */}
          <div class="p-6 relative z-20">

            {/* Titulo del proyecto */}
            <h3 class="text-xl font-semibold dark:text-white mb-2 group-hover:text-primary transition-colors duration-300">
              {proyecto.title}
              <div class="h-1 w-8 bg-primary/40 mt-2 transition-all duration-300 group-hover:w-16 group-hover:bg-primary/60"></div>
            </h3>
            
            {/* Descripcion del proyecto */}
            <p class="text-sm text-text-secundary dark:text-gray-300 mb-4">
              {proyecto.description}
            </p>
            
            {/* Tecnologías */}
            <div class="flex flex-wrap gap-2 mb-4 cursor-default">
              {proyecto.technologies.map((tech, techIndex) => (
                <span 
                  class="text-xs bg-background-secondary text-text-secundary dark:bg-dark-background dark:text-gray-200 px-2 py-1 rounded-full"
                  data-aos="zoom-in" 
                  data-aos-delay={`${(techIndex * 50) + 200}`}
                >
                  {tech}
                </span>
              ))}
            </div>
            
           {/* Link estilizado */}
            <a 
              href={proyecto.urlPage} 
              target="_blank" 
              rel="noopener"
              class="group/link inline-flex items-center gap-1 text-sm font-medium text-primary hover:text-primary-dark transition-colors mt-2"
            >
              <span>Visitar página web</span>
              <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width="16" 
                height="16" 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                stroke-width="2" 
                stroke-linecap="round" 
                stroke-linejoin="round"
                class="transform transition-transform duration-300 group-hover/link:translate-x-1"
              >
                <path d="M5 12h14"></path>
                <path d="m12 5 7 7-7 7"></path>
              </svg>
            </a>
          </div>

          <img src="/christmas/snowflake.png" alt="" class="snowflake-icon absolute bottom-4 right-4 w-8 h-8 z-20 transition-all duration-500" />
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .project-card {
    position: relative;
  }

  /* Hover suave y elegante */
  .project-card:hover {
    border-color: rgba(147, 197, 253, 0.4);
    box-shadow: 0 10px 35px rgba(59, 130, 246, 0.15);
    transform: translateY(-4px);
  }

  /* Efecto de hielo muy sutil */
  .ice-effect {
    background: 
      radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.15) 0%, transparent 60%),
      radial-gradient(circle at 75% 75%, rgba(147, 197, 253, 0.1) 0%, transparent 60%);
  }

  .project-card:hover .ice-effect {
    opacity: 1;
  }

  /* Brillo sutil en el borde */
  .project-card::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 0.75rem;
    padding: 1px;
    background: linear-gradient(135deg, 
      rgba(147, 197, 253, 0.25),
      rgba(186, 230, 253, 0.2),
      rgba(147, 197, 253, 0.25)
    );
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    opacity: 0;
    transition: opacity 0.5s ease;
    z-index: 1;
  }

  .project-card:hover::before {
    opacity: 1;
  }

  /* Pequeñas partículas de escarcha */
  .project-card::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 0.75rem;
    background-image: 
      radial-gradient(circle, rgba(255, 255, 255, 0.35) 1px, transparent 1px);
    background-size: 70px 70px;
    background-position: 0 0;
    opacity: 0;
    transition: opacity 0.7s ease;
    pointer-events: none;
    z-index: 5;
  }

  .project-card:hover::after {
    opacity: 0.25;
    animation: soft-frost 18s linear infinite;
  }

  @keyframes soft-frost {
    0% {
      background-position: 0 0;
    }
    100% {
      background-position: 0 70px;
    }
  }

  /* Efecto sutil en el copo de nieve */
  .project-card:hover .snowflake-icon {
    filter: drop-shadow(0 0 6px rgba(147, 197, 253, 0.5)) brightness(1.15);
    transform: rotate(15deg) scale(1.1);
  }

  /* Efecto adicional en la imagen al hacer hover */
  .project-card:hover img:first-of-type {
    filter: brightness(1.05);
  }
</style>