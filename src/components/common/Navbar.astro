---
import Logo from "./Logo.astro";
import HamburgerButton from "./HamburgerButton.astro";
import DarkModeToggle from "./DarkModeToggle.astro";
import LinksNavbar from "./LinksNavbar.astro";
import { navbarLinksOutside as linksOutside, navbarLinks as linksInside} from "../../js/navbarLinks";
import { contactInfo as contact } from "../../js/contactInfo";

export interface Props {
  isLinksOutside?: boolean
}

const { isLinksOutside = false } = Astro.props
---

<style>
  ul li a.active{
    color: var(--color-primary);
  }
</style>

<nav class="bg-background dark:bg-dark-background fixed w-full top-0 start-0 border-b border-gray-200 dark:border-dark-border z-50">
  <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
    <Logo />
    <div class="flex lg:order-2 space-x-3 lg:space-x-0 rtl:space-x-reverse items-center lg:gap-6 gap-2">
        <DarkModeToggle />
        <HamburgerButton whatsappNumber={contact.phone}/>
    </div>
    <LinksNavbar links={ isLinksOutside ? linksOutside : linksInside}/>
  </div>
</nav>


<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    const toggleButton = document.querySelector('[data-collapse-toggle]');
    const menu = document.getElementById('navbar-default');

    document.addEventListener('click', (event) => {
      const isClickInside = toggleButton.contains(event.target) || menu.contains(event.target);
      const isVisible = !menu.classList.contains('hidden');

      if (!isClickInside && isVisible) {
        toggleButton.click();
      }
    });

    const navLinks = menu.querySelectorAll('a');
    navLinks.forEach(link => {
      link.addEventListener('click', () => {
        if (window.innerWidth < 1024 && !menu.classList.contains('hidden')) {
          toggleButton.click();
        }
      });
    });
  });
</script>
