---
interface Props {
  imageUrl: string;
  alt?: string;
  href: string;
  icon: any; // componente de icono (ejemplo importado desde lucide-react)
  bgColor?: string;
  bgColorDark?: string;
  shadowColor?: string;
  shadowColorDark?: string;
}

const { 
  imageUrl, 
  alt = "", 
  href, 
  icon: Icon, 
  bgColor = "bg-background", 
  bgColorDark = "bg-dark-background", 
  shadowColor = "faf9f5", 
  shadowColorDark = "262624"
} = Astro.props;
---

<style define:vars={{ shadowColor, shadowColorDark }}>
  .shadow-curve-tl {
    box-shadow: -24px 24px 0px 0px #var(--shadowColor);
  }
  
  .shadow-curve-br {
    box-shadow: 24px -24px 0px 0px #var(--shadowColor);
  }
  
  @media (prefers-color-scheme: dark) {
    .shadow-curve-tl {
      box-shadow: -24px 24px 0px 0px #var(--shadowColorDark);
    }
    
    .shadow-curve-br {
      box-shadow: 24px -24px 0px 0px #var(--shadowColorDark);
    }
  }
</style>

<div class="flex w-full items-center justify-center overflow-hidden h-auto">
  <div class="flex items-center flex-col flex-nowrap gap-[10px] h-full w-full justify-center relative">
    <!-- Imagen -->
    <img src={imageUrl} alt={alt} class="h-full w-full rounded-3xl"/>

    <!-- Caja blanca decorativa superior derecha -->
    <div class={`${bgColor} dark:${bgColorDark} rounded-tr-3xl h-14 w-14 z-10 overflow-visible absolute right-0 top-0 rotate-180`}>
      <!-- Sombras curvas -->
      <div class="aspect-square bg-transparent rounded-full shadow-curve-tl absolute left-0 -top-12 w-12"></div>
      <div class="aspect-square bg-transparent rounded-full shadow-curve-tl absolute bottom-0 -right-12 w-12"></div>

      <!-- BotÃ³n con icono -->
      <div class="absolute left-0 bottom-0">
        <a href={href} target="_blank" rel="noopener noreferrer"
           class="rounded-full bg-primary flex items-center justify-center p-3 hover:bg-primary/90 transition-colors">
          <Icon class="h-6 w-6 text-white rotate-180" />
        </a>
      </div>
    </div>

    <!-- Caja decorativa inferior izquierda -->
    <div class={`${bgColor} dark:${bgColorDark} rounded-bl-3xl h-14 w-14 z-10 overflow-visible absolute left-0 bottom-0 rotate-180`}>
      <!-- Sombras curvas para esquina inferior izquierda -->
      <div class="aspect-square bg-transparent rounded-full shadow-curve-br absolute right-0 -bottom-12 w-12"></div>
      <div class="aspect-square bg-transparent rounded-full shadow-curve-br absolute top-0 -left-12 w-12"></div>

      <!-- Contenido inferior izquierda -->
      <div class="absolute right-0 top-0">
        <div class={`${bgColor} dark:${bgColorDark} rounded-bl-none rounded-full flex items-center justify-center p-3 rotate-180 w-40 h-14`}>
          <h2 class="text-sm font-medium">Hola awesome</h2>
        </div>
      </div>
    </div>
  </div>
</div>